import{U as K,V as ie,R as Re,M as $e,ah as _e,ai as Ae,T as le,c as N,n as $,m as re,z as P,d as O,q as B,aw as se,s as ce,b as T,D as de,e as ue,ae as Pe,v as R,x as fe,a as b,ax as ve,Q as z,w as X,A as V,i as q,ay as ze,j as U,G as Ne,C as Oe,az as Le,an as A,ac as Ee,aA as De,f as te,aB as Me,aC as He,aD as ne,K as We,L as Ze,as as Ve,aE as Fe,r as Ue,k as je,t as Ke,ao as qe,al as Xe,am as Ye}from"./index.b5f2d632.js";import{u as he}from"./use-id.1fe87d75.js";import{a as Y}from"./index.7dad203a.js";import{S as Ge,a as Qe}from"./index.9387c4e7.js";import{u as Je}from"./use-refs.d01481f9.js";function pe(e,i,l){let s=0;const a=e.scrollLeft,o=l===0?1:Math.round(l*1e3/16);function r(){e.scrollLeft+=(i-a)/o,++s<o&&K(r)}r()}function et(e,i,l,s){let a=ie(e);const o=a<i,r=l===0?1:Math.round(l*1e3/16),h=(i-a)/r;function u(){a+=h,(o&&a>i||!o&&a<i)&&(a=i),Re(e,a),o&&a<i||!o&&a>i?K(u):s&&K(s)}u()}function tt(e,i){if(!$e||!window.IntersectionObserver)return;const l=new IntersectionObserver(o=>{i(o[0].intersectionRatio>0)},{root:document.body}),s=()=>{e.value&&l.observe(e.value)},a=()=>{e.value&&l.unobserve(e.value)};_e(a),Ae(a),le(s)}const[nt,at]=N("sticky"),ot={zIndex:$,position:re("top"),container:Object,offsetTop:P(0),offsetBottom:P(0)};var it=O({name:nt,props:ot,emits:["scroll","change"],setup(e,{emit:i,slots:l}){const s=B(),a=se(s),o=ce({fixed:!1,width:0,height:0,transform:0}),r=T(()=>de(e.position==="top"?e.offsetTop:e.offsetBottom)),h=T(()=>{const{fixed:d,height:x,width:y}=o;if(d)return{width:`${y}px`,height:`${x}px`}}),u=T(()=>{if(!o.fixed)return;const d=ue(Pe(e.zIndex),{width:`${o.width}px`,height:`${o.height}px`,[e.position]:`${r.value}px`});return o.transform&&(d.transform=`translate3d(0, ${o.transform}px, 0)`),d}),g=d=>i("scroll",{scrollTop:d,isFixed:o.fixed}),C=()=>{if(!s.value||ve(s))return;const{container:d,position:x}=e,y=z(s),v=ie(window);if(o.width=y.width,o.height=y.height,x==="top")if(d){const w=z(d),c=w.bottom-r.value-o.height;o.fixed=r.value>y.top&&w.bottom>0,o.transform=c<0?c:0}else o.fixed=r.value>y.top;else{const{clientHeight:w}=document.documentElement;if(d){const c=z(d),k=w-c.top-r.value-o.height;o.fixed=w-r.value<y.bottom&&w>c.top,o.transform=k<0?-k:0}else o.fixed=w-r.value<y.bottom}g(v)};return R(()=>o.fixed,d=>i("change",d)),fe("scroll",C,{target:a,passive:!0}),tt(s,C),()=>{var d;return b("div",{ref:s,style:h.value},[b("div",{class:at({fixed:o.fixed}),style:u.value},[(d=l.default)==null?void 0:d.call(l)])])}}});const lt=X(it),[rt,ae]=N("tab");var st=O({name:rt,props:{id:String,dot:Boolean,type:String,color:String,title:String,badge:$,shrink:Boolean,isActive:Boolean,disabled:Boolean,controls:String,scrollable:Boolean,activeColor:String,inactiveColor:String,showZeroBadge:V},setup(e,{slots:i}){const l=T(()=>{const a={},{type:o,color:r,disabled:h,isActive:u,activeColor:g,inactiveColor:C}=e;r&&o==="card"&&(a.borderColor=r,h||(u?a.backgroundColor=r:a.color=r));const x=u?g:C;return x&&(a.color=x),a}),s=()=>{const a=b("span",{class:ae("text",{ellipsis:!e.scrollable})},[i.title?i.title():e.title]);return e.dot||q(e.badge)&&e.badge!==""?b(ze,{dot:e.dot,content:e.badge,showZero:e.showZeroBadge},{default:()=>[a]}):a};return()=>b("div",{id:e.id,role:"tab",class:[ae([e.type,{grow:e.scrollable&&!e.shrink,shrink:e.shrink,active:e.isActive,disabled:e.disabled}])],style:l.value,tabindex:e.disabled?void 0:e.isActive?0:-1,"aria-selected":e.isActive,"aria-disabled":e.disabled||void 0,"aria-controls":e.controls},[s()])}});const[ct,oe]=N("tabs");var dt=O({name:ct,props:{count:U(Number),inited:Boolean,animated:Boolean,duration:U($),swipeable:Boolean,lazyRender:Boolean,currentIndex:U(Number)},emits:["change"],setup(e,{emit:i,slots:l}){const s=B(),a=h=>i("change",h),o=()=>{var h;const u=(h=l.default)==null?void 0:h.call(l);return e.animated||e.swipeable?b(Ge,{ref:s,loop:!1,class:oe("track"),duration:+e.duration*1e3,touchable:e.swipeable,lazyRender:e.lazyRender,showIndicators:!1,onChange:a},{default:()=>[u]}):u},r=h=>{const u=s.value;u&&u.state.active!==h&&u.swipeTo(h,{immediate:!e.inited})};return R(()=>e.currentIndex,r),Ne(()=>{r(e.currentIndex)}),Y({swipeRef:s}),()=>b("div",{class:oe("content",{animated:e.animated||e.swipeable})},[o()])}});const[be,Z]=N("tabs"),ut={type:re("line"),color:String,border:Boolean,sticky:Boolean,shrink:Boolean,active:P(0),duration:P(.3),animated:Boolean,ellipsis:V,swipeable:Boolean,scrollspy:Boolean,offsetTop:P(0),background:String,lazyRender:V,lineWidth:$,lineHeight:$,beforeChange:Function,swipeThreshold:P(5),titleActiveColor:String,titleInactiveColor:String},me=Symbol(be);var ft=O({name:be,props:ut,emits:["click","change","scroll","disabled","rendered","click-tab","update:active"],setup(e,{emit:i,slots:l}){let s,a,o;const r=B(),h=B(),u=B(),g=B(),C=he(),d=se(r),[x,y]=Je(),{children:v,linkChildren:w}=Oe(me),c=ce({inited:!1,position:"",lineStyle:{},currentIndex:-1}),k=T(()=>v.length>e.swipeThreshold||!e.ellipsis||e.shrink),L=T(()=>({borderColor:e.color,background:e.background})),E=(t,n)=>{var f;return(f=t.name)!=null?f:n},G=T(()=>{const t=v[c.currentIndex];if(t)return E(t,c.currentIndex)}),F=T(()=>de(e.offsetTop)),Q=T(()=>e.sticky?F.value+s:0),D=t=>{const n=h.value,f=x.value;if(!k.value||!n||!f||!f[c.currentIndex])return;const m=f[c.currentIndex].$el,S=m.offsetLeft-(n.offsetWidth-m.offsetWidth)/2;pe(n,S,t?0:+e.duration)},I=()=>{const t=c.inited;A(()=>{const n=x.value;if(!n||!n[c.currentIndex]||e.type!=="line"||ve(r.value))return;const f=n[c.currentIndex].$el,{lineWidth:m,lineHeight:S}=e,_=f.offsetLeft+f.offsetWidth/2,W={width:te(m),backgroundColor:e.color,transform:`translateX(${_}px) translateX(-50%)`};if(t&&(W.transitionDuration=`${e.duration}s`),q(S)){const ee=te(S);W.height=ee,W.borderRadius=ee}c.lineStyle=W})},ge=t=>{const n=t<c.currentIndex?-1:1;for(;t>=0&&t<v.length;){if(!v[t].disabled)return t;t+=n}},M=t=>{const n=ge(t);if(!q(n))return;const f=v[n],m=E(f,n),S=c.currentIndex!==null;c.currentIndex=n,m!==e.active&&(i("update:active",m),S&&i("change",m,f.title))},H=t=>{const n=v.find((m,S)=>E(m,S)===t),f=n?v.indexOf(n):0;M(f)},J=(t=!1)=>{if(e.scrollspy){const n=v[c.currentIndex].$el;if(n&&d.value){const f=ne(n,d.value)-Q.value;a=!0,et(d.value,f,t?0:+e.duration,()=>{a=!1})}}},ye=(t,n,f)=>{const{title:m,disabled:S}=v[n],_=E(v[n],n);S?i("disabled",_,m):(Ve(e.beforeChange,{args:[_],done:()=>{M(n),J()}}),i("click",_,m),Fe(t)),i("click-tab",{name:_,title:m,event:f,disabled:S})},we=t=>{o=t.isFixed,i("scroll",t)},xe=t=>{A(()=>{H(t),J(!0)})},Se=()=>{for(let t=0;t<v.length;t++){const{top:n}=z(v[t].$el);if(n>Q.value)return t===0?0:t-1}return v.length-1},Ce=()=>{if(e.scrollspy&&!a){const t=Se();M(t)}},Te=()=>v.map((t,n)=>b(st,We({key:t.id,id:`${C}-${n}`,ref:y(n),type:e.type,color:e.color,style:t.titleStyle,class:t.titleClass,shrink:e.shrink,isActive:n===c.currentIndex,controls:t.id,scrollable:k.value,activeColor:e.titleActiveColor,inactiveColor:e.titleInactiveColor,onClick:f=>ye(t,n,f)},Ze(t,["dot","badge","title","disabled","showZeroBadge"])),{title:t.$slots.title})),ke=()=>{if(e.type==="line"&&v.length)return b("div",{class:Z("line"),style:c.lineStyle},null)},p=()=>{var t,n;const{type:f,border:m}=e;return b("div",{ref:u,class:[Z("wrap"),{[Me]:f==="line"&&m}]},[b("div",{ref:h,role:"tablist",class:Z("nav",[f,{shrink:e.shrink,complete:k.value}]),style:L.value,"aria-orientation":"horizontal"},[(t=l["nav-left"])==null?void 0:t.call(l),Te(),ke(),(n=l["nav-right"])==null?void 0:n.call(l)])])};R([()=>e.color,Le],I),R(()=>e.active,t=>{t!==G.value&&H(t)}),R(()=>v.length,()=>{c.inited&&(H(e.active),I(),A(()=>{D(!0)}))}),R(()=>c.currentIndex,()=>{D(),I(),o&&!e.scrollspy&&He(Math.ceil(ne(r.value)-F.value))});const Ie=()=>{H(e.active),A(()=>{c.inited=!0,u.value&&(s=z(u.value).height),D(!0)})},Be=(t,n)=>i("rendered",t,n);return Y({resize:()=>{I(),A(()=>{var t,n;return(n=(t=g.value)==null?void 0:t.swipeRef.value)==null?void 0:n.resize()})},scrollTo:xe}),Ee(I),De(I),le(Ie),fe("scroll",Ce,{target:d,passive:!0}),w({id:C,props:e,setLine:I,onRendered:Be,currentName:G,scrollIntoView:D}),()=>{var t;return b("div",{ref:r,class:Z([e.type])},[e.sticky?b(lt,{container:r.value,offsetTop:F.value,onScroll:we},{default:()=>{var n;return[p(),(n=l["nav-bottom"])==null?void 0:n.call(l)]}}):[p(),(t=l["nav-bottom"])==null?void 0:t.call(l)],b(dt,{ref:g,count:v.length,inited:c.inited,animated:e.animated,duration:e.duration,swipeable:e.swipeable,lazyRender:e.lazyRender,currentIndex:c.currentIndex,onChange:M},{default:()=>{var n;return[(n=l.default)==null?void 0:n.call(l)]}})])}}});const vt=Symbol(),[ht,j]=N("tab"),bt=ue({},Ue,{dot:Boolean,name:$,badge:$,title:String,disabled:Boolean,titleClass:je,titleStyle:[String,Object],showZeroBadge:V});var mt=O({name:ht,props:bt,setup(e,{slots:i}){const l=he(),s=B(!1),{parent:a,index:o}=Ke(me);if(!a)return;const r=()=>{var g;return(g=e.name)!=null?g:o.value},h=()=>{s.value=!0,a.props.lazyRender&&A(()=>{a.onRendered(r(),e.title)})},u=T(()=>{const g=r()===a.currentName.value;return g&&!s.value&&h(),g});return R(()=>e.title,()=>{a.setLine(),a.scrollIntoView()}),qe(vt,u),()=>{var g;const C=`${a.id}-${o.value}`,{animated:d,swipeable:x,scrollspy:y,lazyRender:v}=a.props;if(!i.default&&!d)return;const w=y||u.value;if(d||x)return b(Qe,{id:l,role:"tabpanel",class:j("panel-wrapper",{inactive:!u.value}),tabindex:u.value?0:-1,"aria-hidden":!u.value,"aria-labelledby":C},{default:()=>{var L;return[b("div",{class:j("panel")},[(L=i.default)==null?void 0:L.call(i)])]}});const k=s.value||y||!v?(g=i.default)==null?void 0:g.call(i):null;return Y({id:l}),Xe(b("div",{id:l,role:"tabpanel",class:j("panel"),tabindex:w?0:-1,"aria-labelledby":C},[k]),[[Ye,w]])}}});const Tt=X(mt),kt=X(ft);export{lt as S,Tt as T,kt as a};
